<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Embedded Co-Design (VHDL and C): crQUEUE_RECEIVE_FROM_ISR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>crQUEUE_RECEIVE_FROM_ISR</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
</table>
<p>croutine. h </p>
<pre>
  crQUEUE_SEND_FROM_ISR(
                            xQueueHandle pxQueue,
                            void *pvBuffer,
                            portBASE_TYPE * pxCoRoutineWoken
                       )</pre><p>The macro's <a class="el" href="croutine_8h.html#ac8eb0a81c5cf69de7e4edd73ce44a3be">crQUEUE_SEND_FROM_ISR()</a> and <a class="el" href="croutine_8h.html#a9c0fa977ca69adbddb4811affa2a71f7">crQUEUE_RECEIVE_FROM_ISR()</a> are the co-routine equivalent to the <a class="el" href="queue_8h.html#a2e8236e9af01eedcbc8b67a9cb56b1db">xQueueSendFromISR()</a> and <a class="el" href="queue_8h.html#a38afa09a1f9a629cbf0f7d6929984fe3">xQueueReceiveFromISR()</a> functions used by tasks.</p>
<p><a class="el" href="croutine_8h.html#ac8eb0a81c5cf69de7e4edd73ce44a3be">crQUEUE_SEND_FROM_ISR()</a> and <a class="el" href="croutine_8h.html#a9c0fa977ca69adbddb4811affa2a71f7">crQUEUE_RECEIVE_FROM_ISR()</a> can only be used to pass data between a co-routine and and ISR, whereas <a class="el" href="queue_8h.html#a2e8236e9af01eedcbc8b67a9cb56b1db">xQueueSendFromISR()</a> and <a class="el" href="queue_8h.html#a38afa09a1f9a629cbf0f7d6929984fe3">xQueueReceiveFromISR()</a> can only be used to pass data between a task and and ISR.</p>
<p>crQUEUE_RECEIVE_FROM_ISR can only be called from an ISR to receive data from a queue that is being used from within a co-routine (a co-routine posted to the queue).</p>
<p>See the co-routine section of the WEB documentation for information on passing data between tasks and co-routines and between ISR's and co-routines.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xQueue</em>&nbsp;</td><td>The handle to the queue on which the item is to be posted.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pvBuffer</em>&nbsp;</td><td>A pointer to a buffer into which the received item will be placed. The size of the items the queue will hold was defined when the queue was created, so this many bytes will be copied from the queue into pvBuffer.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>pxCoRoutineWoken</em>&nbsp;</td><td>A co-routine may be blocked waiting for space to become available on the queue. If crQUEUE_RECEIVE_FROM_ISR causes such a co-routine to unblock *pxCoRoutineWoken will get set to pdTRUE, otherwise *pxCoRoutineWoken will remain unchanged.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pdTRUE an item was successfully received from the queue, otherwise pdFALSE.</dd></dl>
<p>Example usage: </p>
<pre>
A co-routine that posts a character to a queue then blocks for a fixed
period.  The character is incremented each time.
 static void vSendingCoRoutine( xCoRoutineHandle xHandle, unsigned portBASE_TYPE uxIndex )
 {
cChar holds its value while this co-routine is blocked and must therefore
be declared static.
 static char cCharToTx = 'a';
 portBASE_TYPE xResult;</pre><pre>All co-routines must start with a call to <a class="el" href="croutine_8h.html#a19a57a201a325e8af1207ed68c4aedde">crSTART()</a>.
     <a class="el" href="croutine_8h.html#a19a57a201a325e8af1207ed68c4aedde">crSTART( xHandle )</a>;</pre><pre>     for( ;; )
     {
Send the next character to the queue.
         <a class="el" href="croutine_8h.html#a26af3d36f22a04168eebdf5b08465d6e">crQUEUE_SEND( xHandle, xCoRoutineQueue, &amp;cCharToTx, NO_DELAY, &amp;xResult )</a>;</pre><pre>         if( xResult == pdPASS )
         {
The character was successfully posted to the queue.
         }
		 else
		 {
Could not post the character to the queue.
		 }</pre><pre>Enable the UART Tx interrupt to cause an interrupt in this
hypothetical UART.  The interrupt will obtain the character
from the queue and send it.
		 ENABLE_RX_INTERRUPT();</pre><pre>Increment to the next character then block for a fixed period.
cCharToTx will maintain its value across the delay as it is
declared static.
		 cCharToTx++;
		 if( cCharToTx &gt; 'x' )
		 {
			cCharToTx = 'a';
		 }
		 <a class="el" href="croutine_8h.html#a05a06feb11028f2d1d440ea335f562ba">crDELAY( 100 )</a>;
     }</pre><pre>All co-routines must end with a call to <a class="el" href="croutine_8h.html#ae6038cc976689b50000475ebfc4e2f23">crEND()</a>.
     <a class="el" href="croutine_8h.html#ae6038cc976689b50000475ebfc4e2f23">crEND()</a>;
 }</pre><pre>An ISR that uses a queue to receive characters to send on a UART.
 void vUART_ISR( void )
 {
 char cCharToTx;
 portBASE_TYPE xCRWokenByPost = pdFALSE;</pre><pre>     while( UART_TX_REG_EMPTY() )
     {
Are there any characters in the queue waiting to be sent?
xCRWokenByPost will automatically be set to pdTRUE if a co-routine
is woken by the post - ensuring that only a single co-routine is
woken no matter how many times we go around this loop.
         if( <a class="el" href="croutine_8h.html#a9c0fa977ca69adbddb4811affa2a71f7">crQUEUE_RECEIVE_FROM_ISR( pxQueue, &amp;cCharToTx, &amp;xCRWokenByPost )</a> )
		 {
			 SEND_CHARACTER( cCharToTx );
		 }
     }
 }</pre> </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Mar 27 2012 15:09:52 for Embedded Co-Design (VHDL and C) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
