<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Embedded Co-Design (VHDL and C): xSemaphoreGiveRecursive</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>xSemaphoreGiveRecursive</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
</table>
<p>semphr. h </p>
<pre><a class="el" href="semphr_8h.html#a398d66b17856c22dd49d39aaac42f105">xSemaphoreGiveRecursive( xSemaphoreHandle xMutex )</a></pre><p><em>Macro</em> to recursively release, or 'give', a mutex type semaphore. The mutex must have previously been created using a call to <a class="el" href="semphr_8h.html#a1bbc843be5a41ea83d2693b2189fc0f8">xSemaphoreCreateRecursiveMutex()</a>;</p>
<p>configUSE_RECURSIVE_MUTEXES must be set to 1 in <a class="el" href="_free_r_t_o_s_config_8h.html">FreeRTOSConfig.h</a> for this macro to be available.</p>
<p>This macro must not be used on mutexes created using <a class="el" href="semphr_8h.html#aa6a00aa9b91a9e5b3ebe4ae1c3f115c6">xSemaphoreCreateMutex()</a>.</p>
<p>A mutex used recursively can be 'taken' repeatedly by the owner. The mutex doesn't become available again until the owner has called <a class="el" href="semphr_8h.html#a398d66b17856c22dd49d39aaac42f105">xSemaphoreGiveRecursive()</a> for each successful 'take' request. For example, if a task successfully 'takes' the same mutex 5 times then the mutex will not be available to any other task until it has also 'given' the mutex back exactly five times.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>xMutex</em>&nbsp;</td><td>A handle to the mutex being released, or 'given'. This is the handle returned by <a class="el" href="semphr_8h.html#aa6a00aa9b91a9e5b3ebe4ae1c3f115c6">xSemaphoreCreateMutex()</a>;</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>pdTRUE if the semaphore was given.</dd></dl>
<p>Example usage: </p>
<pre>
 xSemaphoreHandle xMutex = NULL;</pre><pre>A task that creates a mutex.
 void vATask( void * pvParameters )
 {
Create the mutex to guard a shared resource.
    xMutex = <a class="el" href="semphr_8h.html#a1bbc843be5a41ea83d2693b2189fc0f8">xSemaphoreCreateRecursiveMutex()</a>;
 }</pre><pre>A task that uses the mutex.
 void vAnotherTask( void * pvParameters )
 {
... Do other things.</pre><pre>    if( xMutex != NULL )
    {
See if we can obtain the mutex.  If the mutex is not available
wait 10 ticks to see if it becomes free.	
        if( xSemaphoreTakeRecursive( xMutex, ( portTickType ) 10 ) == pdTRUE )
        {
We were able to obtain the mutex and can now access the
shared resource.</pre><pre>...
For some reason due to the nature of the code further calls to 
<a class="el" href="semphr_8h.html#ad395f4bba51eea6af3397d72bc079e4d">xSemaphoreTakeRecursive()</a> are made on the same mutex.  In real
code these would not be just sequential calls as this would make
no sense.  Instead the calls are likely to be buried inside
a more complex call structure.
            xSemaphoreTakeRecursive( xMutex, ( portTickType ) 10 );
            xSemaphoreTakeRecursive( xMutex, ( portTickType ) 10 );</pre><pre>The mutex has now been 'taken' three times, so will not be 
available to another task until it has also been given back
three times.  Again it is unlikely that real code would have
these calls sequentially, it would be more likely that the calls
to <a class="el" href="semphr_8h.html#a398d66b17856c22dd49d39aaac42f105">xSemaphoreGiveRecursive()</a> would be called as a call stack
unwound.  This is just for demonstrative purposes.
            <a class="el" href="semphr_8h.html#a398d66b17856c22dd49d39aaac42f105">xSemaphoreGiveRecursive( xMutex )</a>;
			<a class="el" href="semphr_8h.html#a398d66b17856c22dd49d39aaac42f105">xSemaphoreGiveRecursive( xMutex )</a>;
			<a class="el" href="semphr_8h.html#a398d66b17856c22dd49d39aaac42f105">xSemaphoreGiveRecursive( xMutex )</a>;</pre><pre>Now the mutex can be taken by other tasks.
        }
        else
        {
We could not obtain the mutex and can therefore not access
the shared resource safely.
        }
    }
 }
 </pre> </div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&nbsp;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&nbsp;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&nbsp;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Mar 27 2012 15:09:52 for Embedded Co-Design (VHDL and C) by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
